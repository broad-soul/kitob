(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["48db32e6"],{"02fa":function(e,t,a){var o=a("268f"),i=a("e265"),n=a("a4bb"),s=a("c47a");function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},l=n(a);"function"===typeof i&&(l=l.concat(i(a).filter(function(e){return o(a,e).enumerable}))),l.forEach(function(t){s(e,t,a[t])})}return e}e.exports=l},"268f":function(e,t,a){e.exports=a("fde4")},"32a6":function(e,t,a){var o=a("241e"),i=a("c3a1");a("ce7e")("keys",function(){return function(e){return i(o(e))}})},"454f":function(e,t,a){a("46a7");var o=a("584a").Object;e.exports=function(e,t,a){return o.defineProperty(e,t,a)}},"46a7":function(e,t,a){var o=a("63b6");o(o.S+o.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"85f2":function(e,t,a){e.exports=a("454f")},"8aae":function(e,t,a){a("32a6"),e.exports=a("584a").Object.keys},a4bb:function(e,t,a){e.exports=a("8aae")},bf90:function(e,t,a){var o=a("36c3"),i=a("bf0b").f;a("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return i(o(e),t)}})},c251:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-scroll-area",{staticStyle:{height:"calc(100vh - 56px)"},attrs:{"thumb-style":e.getThumbStyle}},[a("q-page",{staticClass:"admin__main"},[a("div",{staticClass:"q-pa-md"},[a("q-breadcrumbs",{attrs:{"active-color":"teal"}},[a("q-breadcrumbs-el",{attrs:{icon:"home",label:"Home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Dashboard",to:"/admin"}}),a("q-breadcrumbs-el",{attrs:{label:"Audiobooks",to:"/admin/audiobooks"}}),a("q-breadcrumbs-el",{attrs:{label:"Create"}})],1)],1),a("div",{staticClass:"q-pa-md q-gutter-y-md"},[a("q-card",{staticClass:"q-pa-md q-gutter-y-md"},[a("q-form",{ref:"form",staticClass:"q-gutter-y-md",on:{submit:e.create}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"teal",align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"lang-en",label:"En"}}),a("q-tab",{attrs:{name:"lang-ru",label:"Ru"}}),a("q-tab",{attrs:{name:"lang-uz",label:"Uz"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{staticClass:"p-0",attrs:{name:"lang-en"}},[a("q-input",{attrs:{color:"teal",filled:"",label:"Name",type:"text",clearable:"","lazy-rules":"",disable:e.loading,rules:[function(t){return!!t||e.$t("required_fields")}]},model:{value:e.audiobook.name_en,callback:function(t){e.$set(e.audiobook,"name_en","string"===typeof t?t.trim():t)},expression:"audiobook.name_en"}}),a("q-input",{attrs:{color:"teal",filled:"",label:"Description",type:"textarea",clearable:"","lazy-rules":"",disable:e.loading,rules:[function(t){return!!t||e.$t("required_fields")}]},model:{value:e.audiobook.description_en,callback:function(t){e.$set(e.audiobook,"description_en","string"===typeof t?t.trim():t)},expression:"audiobook.description_en"}})],1),a("q-tab-panel",{staticClass:"p-0",attrs:{name:"lang-ru"}},[a("q-input",{attrs:{color:"teal",filled:"",label:"Название",type:"text",clearable:"","lazy-rules":"",disable:e.loading,rules:[function(t){return!!t||e.$t("required_fields")}]},model:{value:e.audiobook.name_ru,callback:function(t){e.$set(e.audiobook,"name_ru","string"===typeof t?t.trim():t)},expression:"audiobook.name_ru"}}),a("q-input",{attrs:{color:"teal",filled:"",label:"Описание",type:"textarea",clearable:"","lazy-rules":"",disable:e.loading,rules:[function(t){return!!t||e.$t("required_fields")}]},model:{value:e.audiobook.description_ru,callback:function(t){e.$set(e.audiobook,"description_ru","string"===typeof t?t.trim():t)},expression:"audiobook.description_ru"}})],1),a("q-tab-panel",{staticClass:"p-0",attrs:{name:"lang-uz"}},[a("q-input",{attrs:{color:"teal",filled:"",label:"Nomi",type:"text",clearable:"","lazy-rules":"",disable:e.loading,rules:[function(t){return!!t||e.$t("required_fields")}]},model:{value:e.audiobook.name_uz,callback:function(t){e.$set(e.audiobook,"name_uz","string"===typeof t?t.trim():t)},expression:"audiobook.name_uz"}}),a("q-input",{attrs:{color:"teal",filled:"",label:"Tavsifi",type:"textarea",clearable:"","lazy-rules":"",disable:e.loading,rules:[function(t){return!!t||e.$t("required_fields")}]},model:{value:e.audiobook.description_uz,callback:function(t){e.$set(e.audiobook,"description_uz","string"===typeof t?t.trim():t)},expression:"audiobook.description_uz"}})],1)],1),a("q-select",{attrs:{color:"teal","option-value":"id",filled:"","use-input":"","use-chips":"",multiple:"",options:e.genres,label:"Genres","option-label":"name","options-selected-class":"text-teal"},model:{value:e.new_genres,callback:function(t){e.new_genres=t},expression:"new_genres"}}),a("q-select",{attrs:{color:"teal","option-value":"id",filled:"","use-input":"","use-chips":"",multiple:"",options:e.authors,label:"Authors","option-label":"name","options-selected-class":"text-teal"},model:{value:e.new_authors,callback:function(t){e.new_authors=t},expression:"new_authors"}}),a("q-select",{attrs:{filled:"",disable:e.loading,label:"Audiobook year",options:e.graduationYearSelect,"lazy-rules":"",color:"teal",rules:[function(t){return!!t||e.$t("required_fields")}],"options-selected-class":"text-teal"},model:{value:e.audiobook.year,callback:function(t){e.$set(e.audiobook,"year",t)},expression:"audiobook.year"}}),a("q-select",{attrs:{filled:"",disable:e.loading,label:"Audiobooks lang",options:["en","ru","uz"],"lazy-rules":"",color:"teal",rules:[function(t){return!!t||e.$t("required_fields")}],"options-selected-class":"text-teal"},model:{value:e.audiobook.lang,callback:function(t){e.$set(e.audiobook,"lang",t)},expression:"audiobook.lang"}}),a("q-uploader",{ref:"cover",staticStyle:{width:"100%"},attrs:{disable:e.loading,extensions:".jpg,.jpeg,.png",accept:".jpg, .jpeg, image/jpeg, .png","max-file-size":3048576,color:e.cover},on:{added:function(t){return e.addFile("cover")}},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",{staticClass:"row no-wrap items-center q-pa-sm q-gutter-xs"},[t.uploadedFiles.length>0?a("q-btn",{attrs:{icon:"done_all",round:"",dense:"",flat:""},on:{click:t.removeUploadedFiles}},[a("q-tooltip",[e._v("Remove Uploaded Files")])],1):e._e(),t.isUploading?a("q-spinner",{staticClass:"q-uploader__spinner"}):e._e(),a("div",{staticClass:"col"},[a("div",{staticClass:"q-uploader__title"},[e._v("Cover (.png, .jpg, .jpeg)")]),a("div",{staticClass:"q-uploader__subtitle"},[e._v(e._s(t.uploadSizeLabel))])]),t.canAddFiles?a("q-btn",{attrs:{type:"a",icon:"add_box",round:"",dense:"",flat:""}},[a("q-uploader-add-trigger"),a("q-tooltip",[e._v(e._s(e.$t("attach_documents")))])],1):e._e(),t.isUploading?a("q-btn",{attrs:{icon:"clear",round:"",dense:"",flat:""},on:{click:t.abort}},[a("q-tooltip",[e._v("Abort Upload")])],1):e._e()],1)]}},{key:"list",fn:function(t){return[a("q-list",{attrs:{separator:""}},e._l(t.files,function(o){return a("q-item",{key:o.name},[a("q-item-section",[a("q-item-label",{staticClass:"full-width ellipsis"},[e._v("\n                      "+e._s(o.name)+"\n                    ")])],1),o.__img?a("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[a("img",{attrs:{src:o.__img.src}})]):e._e(),a("q-item-section",{attrs:{top:"",side:""}},[a("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(e){return t.removeFile(o)}}})],1)],1)}),1)]}}])}),a("q-uploader",{ref:"files",staticStyle:{width:"100%"},attrs:{disable:e.loading,extensions:".mp3",accept:".mp3","max-file-size":8048576,color:e.files,multiple:""},on:{added:function(t){return e.addFile("files")}},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",{staticClass:"row no-wrap items-center q-pa-sm q-gutter-xs"},[t.uploadedFiles.length>0?a("q-btn",{attrs:{icon:"done_all",round:"",dense:"",flat:""},on:{click:t.removeUploadedFiles}},[a("q-tooltip",[e._v("Remove Uploaded Files")])],1):e._e(),t.isUploading?a("q-spinner",{staticClass:"q-uploader__spinner"}):e._e(),a("div",{staticClass:"col"},[a("div",{staticClass:"q-uploader__title"},[e._v("Files (.mp3)")]),a("div",{staticClass:"q-uploader__subtitle"},[e._v(e._s(t.uploadSizeLabel))])]),t.canAddFiles?a("q-btn",{attrs:{type:"a",icon:"add_box",round:"",dense:"",flat:""}},[a("q-uploader-add-trigger"),a("q-tooltip",[e._v(e._s(e.$t("attach_documents")))])],1):e._e(),t.isUploading?a("q-btn",{attrs:{icon:"clear",round:"",dense:"",flat:""},on:{click:t.abort}},[a("q-tooltip",[e._v("Abort Upload")])],1):e._e()],1)]}},{key:"list",fn:function(t){return[a("q-list",{attrs:{separator:""}},e._l(t.files,function(o){return a("q-item",{key:o.name},[a("q-item-section",[a("q-item-label",{staticClass:"full-width ellipsis"},[e._v("\n                      "+e._s(o.name)+"\n                    ")])],1),o.__img?a("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[a("img",{attrs:{src:o.__img.src}})]):e._e(),a("q-item-section",{attrs:{top:"",side:""}},[a("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(e){return t.removeFile(o)}}})],1)],1)}),1)]}}])}),a("q-btn",{attrs:{color:"teal mr-3",type:"submit",loading:e.loading,disable:e.loading}},[e._v("Create")]),a("q-btn",{attrs:{disable:e.loading,to:"/admin/audiobooks"}},[e._v("Cancel")])],1)],1)],1)])],1)},i=[],n=(a("551c"),a("06db"),a("097d"),a("28a5"),a("02fa")),s=a.n(n),l=a("2f62"),r={name:"AudiobookCreate",data:function(){return{tab:"lang-en",cover:"secondary",files:"secondary",loading:!1,new_genres:[],new_authors:[],genres:[],authors:[],audiobook:{name_en:"",name_ru:"",name_uz:"",description_en:"",description_ru:"",description_uz:"",year:"",status:0,lang:""}}},computed:s()({},Object(l["c"])(["getLangPr","getToken","mobileDetect","getThumbStyle"]),{graduationYearSelect:function(){for(var e=(new Date).getFullYear(),t=[];e>=1900;e--)t.push(e);return t}}),watch:{},beforeMount:function(){var e=this;this.$axios.get(this.getDomain+this.getLangPr.split("-")[0]+"/genres").then(function(t){e.genres=t.data}),this.$axios.get(this.getDomain+this.$t("lang_code")+"/authors").then(function(t){e.authors=t.data})},mounted:function(){},methods:{create:function(){var e=this;this.$axios.defaults.headers={"x-api-key":"18f057d42feadf59b4943b7fb4c064fcd626778f","x-session-token":this.getToken},this.loading=!0;var t=new FormData;t.append("audiobooks[name_en]",this.audiobook.name_en),t.append("audiobooks[name_ru]",this.audiobook.name_ru),t.append("audiobooks[name_uz]",this.audiobook.name_uz),t.append("audiobooks[description_en]",this.audiobook.description_en),t.append("audiobooks[description_ru]",this.audiobook.description_ru),t.append("audiobooks[description_uz]",this.audiobook.description_uz),t.append("audiobooks[lang]",this.audiobook.lang),t.append("audiobooks[year]",this.audiobook.year),this.new_genres.forEach(function(e,a){t.append("genres[".concat(a,"]"),e.id)}),this.new_authors.forEach(function(e,a){t.append("authors[".concat(a,"]"),e.id)}),t.append("status",this.audiobook.status),t.append("cover",this.$refs.cover.files[0]),this.$refs.files.forEach(function(e,a){t.append("files[".concat(a,"]"),e)}),this.$axios.post("https://api.kitob.itsm.uz/api/dev/ru/audiobooks",t).then(function(){e.$q.notify({color:"teal",icon:"check_circle",message:"Event created",position:"top",timeout:200}),e.$router.push("/admin/audiobooks")}).finally(function(){e.loading=!1})},addFile:function(e){"cover"===e&&(this.cover="secondary"),"files"===e&&(this.files="secondary")}}},u=r,c=a("2877"),d=Object(c["a"])(u,o,i,!1,null,null,null);t["default"]=d.exports},c47a:function(e,t,a){var o=a("85f2");function i(e,t,a){return t in e?o(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.exports=i},ce7e:function(e,t,a){var o=a("63b6"),i=a("584a"),n=a("294c");e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],s={};s[e]=t(a),o(o.S+o.F*n(function(){a(1)}),"Object",s)}},e265:function(e,t,a){e.exports=a("ed33")},ed33:function(e,t,a){a("014b"),e.exports=a("584a").Object.getOwnPropertySymbols},fde4:function(e,t,a){a("bf90");var o=a("584a").Object;e.exports=function(e,t){return o.getOwnPropertyDescriptor(e,t)}}}]);
